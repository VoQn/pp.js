(function(){var e,t,n,r,i,s,o,u=[].slice,a={}.hasOwnProperty;s=this,i={},r=s.pp,typeof module=="object"?module.exports=i:s.pp=i,i.noConflict=function(){return s.pp=r,i},n=function(){var e,t,n,r;return t=function(e){switch(typeof e){case"undefined":case"boolean":case"number":case"string":return!0;default:return e===null}},e=Array.isArray||function(e){return toString.call(e)==="[object Array]"},n=function(){var e,t;t=arguments[0],e=2<=arguments.length?u.call(arguments,1):[],process.nextTick(function(){t.apply(null,e)})},r=function(){var e,t,n;t=arguments[0],e=2<=arguments.length?u.call(arguments,1):[],n=setTimeout(function(){clearTimeout(n),t.apply(null,e)},0)},{isPrimitive:t,isArray:e,keys:Object.keys||function(e){var t,n;n=[];for(t in e)n.push(t);return n},inherit:Object.create||function(n){var r,i;return i=n,t(n)?i:e(n)?n.slice():toString.call(n)==="[object Object]"?{}:(r=function(){},r.prototype=n.prototype,new r)},nothing:function(){},id:function(e){return e},not:function(e){return!e},defer:process&&typeof process.nextTick=="function"?n:r,invalidArgumentError:function(e,t,n){return new TypeError(""+e+" - Invalid Argument : "+t+"\n"+n)}}}(),i.defer=n.defer,o=function(){var e,t,n,r,s,o;return e=function(){var e,t,n,r,i;t={},i=[240,120,75,60,45,30,27,15,1];for(n=0,r=i.length;n<r;n++)e=i[n],t["FPS_"+e]=~~(1e3/e);return t}(),s=[],o=[],t=Date.now||function(){return+(new Date)},n=function(){var e,r,u;if(!s.length)return;e=s.shift(),u=o.shift(),r=t()+u;while(typeof e=="function"&&t()<r)e=e();typeof e=="function"&&(s.push(e),o.push(u)),i.defer(n)},r=function(t){return typeof t!="number"?e.FPS_240:Math.max(t,e.FPS_240)},{TIME_SLICE:e,partial:function(e){var t,a;return a=e.length,t=function(){var f,l;l=1<=arguments.length?u.call(arguments,0):[];if(a<=l.length){s.push(function(){return e.apply(null,l.slice(0,a))}),o.push(r(a<l.length?l[a]:0)),s.length===1&&i.defer(n);return}return f=function(){var e;return e=1<=arguments.length?u.call(arguments,0):[],e.length<1?f:t.apply(null,l.concat(e))}}}}}(),i.TIME_SLICE=o.TIME_SLICE,i.extend=function(e){var t,r,i,s;s=typeof e=="function"?e(n):e;for(r in s){if(!a.call(s,r))continue;i=s[r],t=r.match(/^_/i),n[t?r.substring(1):r]=i,t||(this[r]=o.partial(i))}return this},i.extend(function(e){return{_iteratorMixin:function(t,n,r){var i;return i=function(i,s,o){var u;if(e.isPrimitive(o)){u="required Array or Object as HashMap",s(e.invalidArgumentError(t,o,u));return}return e.isArray(o)?n(i,s,o):r(i,s,o)}}}}),t=function(){function i(e){this.state=n,this.stack=[],this.scope=e||null}var e,t,n,r;return n="unresolved",t="resolved",e="rejected",r=o.partial(function(n,r){var i;return n.result=r,i=function(){var r,s;if(n.stack.length<1){n.state!==e&&(n.state=t);return}r=n.stack.shift(),s=n.state===e?r[1]:r[0];if(s)try{n.result=s.call(n.scope,n.result)}catch(o){n.state=e,n.result=o}return i}}),i.prototype.STATE={UNRESOULVED:n,RESOLVED:t,REJECTED:e},i.prototype.resolve=function(e){return r(this,e),this},i.prototype.reject=function(t){return this.state=e,r(this,t),this},i.prototype.isResolved=function(){return this.state===t},i.prototype.isRejected=function(){return this.state===e},i.prototype.then=function(e,t,i){return this.stack.push([e||null,t||null,i||null]),this.state!==n&&r(this,null),this},i}(),i.promise=function(e){return new t(e)},e=function(){function e(e){this.continuation=e}return e.prototype.next=function(e){return typeof e!="function"&&(e=n.id),this.continuation(function(){var t,n,r;return n=arguments[0],t=2<=arguments.length?u.call(arguments,1):[],this.continuation=n,r=e.apply(null,t)||(t.length===1?t[0]:t),r})},e}(),i.generator=function(t){return new e(t)},i.extend(function(e){var t,n,r,i,s,o,a;return t=function(e){var t;return t=function(t,n,r){var i,s,o,a,f,l;return a=r.length,a?(o=i=0,s=!1,l=function(){var e,t;t=arguments[0],e=2<=arguments.length?u.call(arguments,1):[],++i;if(s)return;if(i>=a||t||e.length)s=!0,e.unshift(t||null),n.apply(null,e)},f=function(){if(s)return;return e(o,a,i)&&(t(l,r[o],o,r),++o),f}):n(null)}},r=function(t){var n;return n=function(n,r,i){var s;return s=function(e,t,r,s){n(e,i[t],t,i)},t(s,r,e.keys(i))}},o=function(e,t){return e<t},a=function(e,t,n){return e<t&&e<=n},i=e.iteratorMixin,n=t(o),s=t(a),{_arrayEachFill:n,_arrayEachOrder:s,each:i("pp#each",n,r(n)),eachOrder:i("pp#eachOrder",s,r(s))}}),i.extend(function(e){var t,n,r,i,s;return t=function(e){var t;return t=function(t,n,r){var i,s,o,u;return o=[],u=null,s=function(e,n,r,i){u=function(t,n){o[r]=n,e(t)},t(u,n,r,i)},i=function(e){n(e,o)},e(s,i,r)}},r=function(t){var n;return n=function(n,r,i){var s,o,u,a;return u=e.inherit(i),a=null,o=function(e,t,r,s){a=function(n,r){n||(u[t]=r),e(n)},n(a,i[t],t,i)},s=function(e){r(e,u)},t(o,s,e.keys(i))}},i=e.iteratorMixin,n=e.arrayEachFill,s=e.arrayEachOrder,{map:i("pp#map",t(n),r(n)),mapOrder:i("pp#mapOrder",t(s),r(s))}}),i.extend(function(e){var t,n,r,i,s,o,u;return s=e.arrayEachOrder,t=function(e){var t;return t=function(t,n,r,i){var o,u,a,f;return f=r,o=null,a=function(n,r,i,s){i=e(i,s.length),o=function(e,t){f=t,n(e)},t(o,f,s[i],i,s)},u=function(e){n(e,f)},s(a,u,i)}},u=function(t,n){var r;if(!e.isArray(n))r="require Array (Not Null) to folding, but "+typeof n;else{if(!!n.length)return;r="Array length is 0, and without init value"}return e.invalidArgumentError(t,n,r)},r=function(e,t,n){var r;return r=function(r,i,s){var o,a,f;return a=u(e,s),a?i(a):(o=s.slice(),f=o[t](),n(r,i,f,o))}},o=function(e,t){return t-(e+1)},n=t(e.id),i=t(o),{foldl:n,foldr:i,foldl1:r("pp#foldl1","shift",n),foldr1:r("pp#foldr1","pop",i)}}),i.extend(function(e){var t,n,r;return t=function(t){var n;return n=function(n,r,i){var s,o,u,a;return a=[],u=null,o=function(e,r,s){u=function(n,i){t(i)&&a.push(r),e(n)},n(u,r,s,i)},s=function(e){r(e,a)},e.arrayEachOrder(o,s,i)}},n=function(t){var n;return n=function(n,r,i){var s,o,u,a;return u=e.inherit(i),a=null,o=function(e,r,s,o){a=function(n,s){t(s)&&(u[r]=i[r]),e(n)},n(a,i[r],r,i)},s=function(e){r(e,u)},e.arrayEachFill(o,s,e.keys(i))}},r=e.iteratorMixin,{filter:r("pp#filter",t(e.id),n(e.id)),reject:r("pp#reject",t(e.not),n(e.not))}}),i.extend(function(e){var t,n,r,i;return i=function(t,n){var r;return r=function(r,i,s){var o,u;return o=null,u=function(e,n,i,s){o=function(r,i){t(i)?e(r,n):e(r)},r(o,n,i,s)},e.each(u,n(i),s)}},r=function(e){var t;return t=function(t){var n;return n=function(n){t(n,e(arguments.length))}}},t=function(e){return e>1},n=function(e){return e<2},{any:i(e.id,r(t)),all:i(e.not,r(n)),find:i(e.id,e.id)}}),i.extend(function(e){var t;return t=function(t){var n;return n=function(n,r,i,s){var o,a,f,l,c,h;return c=e.isArray(s)?s.slice():[],a=!1,h=function(){var e,t;t=arguments[0],e=2<=arguments.length?u.call(arguments,1):[];if(a)return;if(t){a=!0,i(t);return}e.length&&(c=e)},o=function(e,n){if(e||t(n)){a=!0,c.unshift(e||null),i.apply(null,c);return}c.unshift(h),r.apply(null,c)},l=[o],f=function(){if(a)return;return n.apply(null,l.concat(c)),f}}},{whilist:t(e.not),until:t(e.id)}}),i.extend(function(e){var t;return t=function(t,n){var r;return r=function(r,i){var s;return s=function(n,r){var i;if(typeof r!="function"){i="required function. but include "+typeof r,n(e.invalidArgumentError(t,r,i));return}r(function(){var e;e=1<=arguments.length?u.call(arguments,0):[],n.apply(null,e)})},n(s,i,r)}},{fill:t("pp#fill",e.map),order:t("pp#order",e.mapOrder)}}),i.iterator=function(e){var t,n,r;n=e.length;if(!n)return;return t=[],r=function(i){var s;return i<t.length?t[i]:(s=function(){var t;return t=1<=arguments.length?u.call(arguments,0):[],e[i].apply(e[i],t),s.next()},s.next=function(){return i<n-1?r(i+1):null},s.clearCache=function(){t=[]},t[i]=s,s)},r(0)},i.waterfall=function(e,t){var r,s;t==null&&(t=n.id);if(!e.length)return t();r=!1,s=function(e){var n,o;return n=function(){var n;n=1<=arguments.length?u.call(arguments,0):[],t.apply(null,n),e.clearCache()},o=function(){var o,a,f;a=arguments[0],o=2<=arguments.length?u.call(arguments,1):[];if(r)return;if(a){r=!0,t(a);return}f=e.next(),o.unshift(f?s(f):n),i.defer(function(){e.apply(e,o)})}},i.defer(s(i.iterator(e)))}}).call(this);