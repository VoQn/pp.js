<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>pp.js by VoQn</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>pp.js</h1>
        <p>Pseudo-Parallel, Passing-Procedure, Pretty-Promise. Asynchronous Collection &amp; Procedure Control Flow</p>
        <p class="view"><a href="https://github.com/VoQn/pp.js">View the Project on GitHub <small>VoQn/pp.js</small></a></p>
        <ul>
          <li><a href="https://github.com/VoQn/pp.js/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/VoQn/pp.js/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/VoQn/pp.js">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>pp.js - pianissimo -</h1>

<p><a href="http://travis-ci.org/VoQn/pp.js"><img src="https://secure.travis-ci.org/VoQn/pp.js.png" alt="Build Status"></a></p>

<p><strong>pp.js</strong> is called <strong>pianissimo.js</strong>, which means <em>Pseudo-Parallel</em>, <em>Passing-Procedure</em>, or <em>Pretty-Promise</em>.
pp.js is a javascript library for Asynchronous Collection &amp; Procedure Control Flow.</p>

<p>this library is inspired by <a href="https://github.com/caolan/async">async.js</a>, <a href="http://cho45.stfuawsc.com/jsdeferred/">JsDeferred</a>, <a href="http://api.jquery.com/category/deferred-object/">$.Deferred</a>, and <a href="http://wiki.commonjs.org/wiki/Promises/A">Promise/A</a>.
And aiming provide compatible API.</p>

<p>to read this library specification see <a href="#guide">Guide</a>, <a href="#reference">Reference</a></p>

<h2>Faster, Fewer Cost, Parallel multi process</h2>

<p><img src="https://lh4.googleusercontent.com/-N_dY3EUza5A/UE_932DxeBI/AAAAAAAAAlk/BoI8v5z7r00/s874/%E3%82%B9%E3%82%AF%E3%83%AA%E3%83%BC%E3%83%B3%E3%82%B7%E3%83%A7%E3%83%83%E3%83%88+2012-09-12+12.12.36.png" alt="Benchmark pp.js vs async.js"></p>

<ul>
<li>pp.js faster than async.js (more than 1.25x)</li>
<li>pp.js use fewer memory async.js (lower than 1/3)</li>
<li>pp.js work looks like parallel (see <a href="#trampolining">Guide/Trampolining</a>)</li>
<li>while running pp.js process, It does not block user control as possible as.</li>
</ul><h2>License</h2>

<p>MIT License. see LICENSE file.</p>

<h2>API</h2>

<h3>Continuation Object</h3>

<p>These function create instance of <code>Promise</code> and <code>Generator</code> that controller
about Asynchonouse routine.</p>

<ul>
<li>
<a href="#promise">pp.promise</a> - Implement <a href="http://wiki.commonjs.org/wiki/Promises/A">Promise/A</a> of <a href="http://www.commonjs.org/">CommonJS</a>
</li>
<li>
<a href="#generator">pp.generator</a> - simple <a href="http://wiki.ecmascript.org/doku.php?id=harmony:generators">Generator</a> like <a href="https://mail.mozilla.org/pipermail/es-discuss/2008-August/006837.html">ES-Harmony</a>
</li>
</ul><h3>Control Flow against Array as procedures</h3>

<p>These API are very similar to functions of async.js.
But here is different argument rule, never blocking user thread, and faster.</p>

<ul>
<li>
<a href="#iterator">pp.iterator</a> - like <a href="https://github.com/caolan/async#iterator">async.iterator</a>
</li>
<li>
<a href="#waterfall">pp.waterfall</a> - like <a href="https://github.com/caolan/async#waterfall">async.waterfall</a>
</li>
<li>
<a href="#whilist">pp.whilist</a> - like
<a href="https://github.com/caolan/async#whilist">async.whilist</a>
</li>
<li>
<a href="#until">pp.until</a> - like <a href="https://github.com/caolan/async#until">async.until</a>
</li>
<li>
<a href="#fill">pp.fill</a> - like
<a href="https://github.com/caolan/async#parallel">async.parallel</a>
</li>
<li>
<a href="#order">pp.order</a> - like <a href="https://github.com/caolan/async#series">async.series</a>
</li>
</ul><h3>Collection API</h3>

<p>These API are very similar to functions of async.js.
But here is different argument rule, never blocking user thread, never occuring
<code>Stack Over Flow</code>, faster (x 1.5 ~ 2.0), and use less heap memory (x ~0.5).</p>

<ul>
<li>
<a href="#each">pp.each</a> - like <a href="https://github.com/caolan/async#forEach">async.forEach</a>, <a href="https://github.com/caolan/async#forEach">async.forEachLimit</a>
</li>
<li>
<a href="#map">pp.map</a> - like <a href="https://github.com/caolan/async#map">async.map</a>
</li>
<li>
<a href="#filter">pp.filter</a> - like
<a href="https://github.com/caolan/async#filter">async.filter</a>
</li>
<li>
<a href="#reject">pp.reject</a> - like
<a href="https://github.com/caolan/async#reject">async.reject</a>
</li>
<li>
<a href="#find">pp.find</a> - like <a href="https://github.com/caolan/async#detect">async.detect</a>
</li>
<li>
<a href="#any">pp.any</a> - like <a href="https://github.com/caolan/async#some">async.some</a>
</li>
<li>
<a href="#all">pp.all</a> - like <a href="https://github.com/caolan/async#every">async.every</a>
</li>
<li>
<a href="#foldl">pp.foldl</a> - like <a href="https://github.com/caolan/async#reduce">async.reduce</a>
</li>
<li>
<a href="#foldr">pp.foldr</a> - like
<a href="https://github.com/caolan/async#reduce">async.redureRight</a>
</li>
</ul><h3>Plugin Extention Interface, and Etc...</h3>

<ul>
<li>
<a href="#extend">pp.extend</a> if want to add extention, call this.</li>
<li>
<a href="#defer">pp.defer</a> deferring (use <code>process.nextTick</code> (node.js) or
<code>setTimeout(fn, 0, args...)</code>)</li>
<li>
<a href="#timeslice">pp.TIME_SLICE</a> preset parameters X fps (ms)</li>
<li><a href="#noconflict">pp.noConflict</a></li>
</ul><hr><p><a name="guide"></a></p>

<h1>Guide</h1>

<h2>CPS (Continuation Passing Style)</h2>

<p><strong>pp.js</strong> is designed by <a href="http://en.wikipedia.org/wiki/Continuation-passing_style">CPS</a>, <em>Continuation Passing Style</em>, for effective Asynchronous processing.</p>

<div class="highlight"><pre><span class="c1"># sync procedure</span>
<span class="nv">sq = </span><span class="nf">(x) -&gt;</span>
  <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span>

<span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="nx">sq</span> <span class="mi">10</span> <span class="c1"># return 10 * 10 -&gt; 100 -&gt; console.log(100) =&gt; IO output</span>

<span class="c1"># CPS procedure</span>
<span class="nv">cpsSq = </span><span class="nf">(next, x) -&gt;</span>
  <span class="nx">next</span> <span class="nx">x</span> <span class="o">*</span> <span class="nx">x</span>

<span class="nx">cpsSq</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">,</span> <span class="mi">10</span> <span class="c1"># console.log(10 * 10) -&gt; console.log(100) =&gt; IO output</span>

<span class="c1"># Async procedure</span>
<span class="nv">heavyProcessing = </span><span class="nf">(callback, parameters) -&gt;</span>
  <span class="c1"># do something (use long time, or network communication)</span>
  <span class="c1"># ...</span>
  <span class="c1"># ...</span>
  <span class="nx">callback</span> <span class="nx">error</span><span class="p">,</span> <span class="nx">result</span> <span class="c1"># when process done, result apply asynchronouse</span>

<span class="nx">heavyProcessing</span><span class="p">(</span><span class="nx">function</span><span class="p">(</span><span class="nx">e</span><span class="p">,</span> <span class="nx">r</span><span class="p">)</span> <span class="p">{</span> <span class="c1"># callback</span>
  <span class="k">if</span> <span class="nx">e</span> <span class="c1"># receive error</span>
    <span class="c1"># do something</span>
  <span class="k">else</span> <span class="c1"># process has been succeeded</span>
    <span class="c1"># do something</span>
<span class="p">},</span> <span class="p">[</span><span class="cm">### parameters ###</span><span class="p">]);</span>
</pre></div>

<p><a name="trampolining"></a></p>

<h2>Trampolining, "Pseudo-Parallel"</h2>

<p><strong>pp.js</strong> doesn't provide <em>true</em> parallel processing. Parallel processing is a strictly pseudo.
This pseudo-parallel processing on <a href="http://en.wikipedia.org/wiki/Trampoline_(computing)">Trampoling</a>.</p>

<h2>Public API are curried</h2>

<p><strong>pp.js</strong> API are curried function.</p>

<p>For example, CPS sum of number array is this.</p>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">printSum</span> <span class="o">=</span> <span class="nx">pp</span><span class="p">.</span><span class="nx">foldl</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">,</span> <span class="nx">memo</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">!==</span> <span class="s1">'number'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">next</span><span class="p">(</span><span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s1">'"folding" require number, but '</span> <span class="o">+</span> <span class="k">typeof</span> <span class="nx">value</span><span class="p">));</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">memo</span> <span class="o">+</span> <span class="nx">value</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>
<span class="p">},</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// See it! subject array has not apply!</span>

<span class="nx">printSum</span><span class="p">([</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">]);</span> <span class="c1">//=&gt; 33</span>
<span class="nx">printSum</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span> <span class="c1">//=&gt; 15</span>
</pre></div>

<h2>Invocation type of callback, "fill" and "order"</h2>

<p>In designing Asynchronous operetion, maybe occur a problem that dependency with
each procedures.</p>

<p>Because solve it, pp.js provide two iteration. <em>fill</em> and <em>order</em>.</p>

<h3>fill</h3>

<p><code>fill</code> process is ASAP (As Soon As Possible)</p>

<div class="highlight"><pre><span class="nx">fireStack</span> <span class="o">=</span> <span class="p">[];</span>

<span class="nx">pp</span><span class="p">.</span><span class="nx">fill</span><span class="p">([</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">fireStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">'1st'</span><span class="p">);</span>
      <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">'1st'</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">100</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">fireStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">'2nd'</span><span class="p">);</span>
      <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">'2nd'</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">200</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">fireStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">'3rd'</span><span class="p">);</span>
      <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">'3rd'</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">50</span><span class="p">)</span>
  <span class="p">}],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// result     --- ['1st', '2nd', '3rd']</span>
    <span class="c1">// fire_stack --- ['3rd', '1st', '2nd']</span>
  <span class="p">});</span>
</pre></div>

<h3>order</h3>

<p><code>order</code> process is keep invocation order.</p>

<div class="highlight"><pre><span class="nx">fireStack</span> <span class="o">=</span> <span class="p">[];</span>

<span class="nx">pp</span><span class="p">.</span><span class="nx">order</span><span class="p">([</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">fireStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">'1st'</span><span class="p">);</span>
      <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">'1st'</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">100</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">fireStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">'2nd'</span><span class="p">);</span>
      <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">'2nd'</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">200</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">fireStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">'3rd'</span><span class="p">);</span>
      <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">'3rd'</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">50</span><span class="p">)</span>
  <span class="p">}],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// result     --- ['1st', '2nd', '3rd']</span>
    <span class="c1">// fire_stack --- ['1st', '2nd', '3rd']</span>
  <span class="p">});</span>
</pre></div>

<h3>Difference?</h3>

<div class="highlight"><pre><span class="nx">pp</span><span class="p">.</span><span class="nx">fill</span> <span class="nx">F</span><span class="p">,</span> <span class="nx">G</span><span class="p">,</span> <span class="nx">H</span><span class="p">,</span> <span class="nx">CALLBACK</span>
<span class="c1"># eval F -&gt; eval G -&gt; eval H -&gt; (wait callback...) -&gt; eval CALLBACK</span>

<span class="nx">pp</span><span class="p">.</span><span class="nx">order</span> <span class="nx">F</span><span class="p">,</span> <span class="nx">G</span><span class="p">,</span> <span class="nx">H</span><span class="p">,</span> <span class="nx">CALLBACK</span>
<span class="c1"># eval F -&gt; (wait F callback...) -&gt; eval G -&gt; (wait G callback...) -&gt; ...</span>
</pre></div>

<p>Why <code>pp.fill</code>'s name is <em>parallel</em> but <em>fill</em>? Because it run all procedures and wait until all callback is filling.</p>

<p><code>pp.order</code> is keeping its ordering. When it began run procedure, wait that callback, run next procedure. Until last.</p>

<h2>Type</h2>

<p>One of difference between <strong>pp.js</strong> with <strong>async.js</strong> is consisted argument format.</p>

<h3>TimeSlice: number (integer milli-second [0 &lt; t])</h3>

<p><code>pp.TIME_SLICE</code> provide consts for frame rate.</p>

<ul>
<li>FPS_240 -  4ms</li>
<li>FPS_120 -  8ms</li>
<li>FPS_60  - 16ms</li>
<li>FPS_30  - 33ms</li>
<li>FPS_15  - 66ms</li>
<li>FPS_1   -  1s (1000ms)</li>
</ul><hr><h3>Callback: function(?Error, [somethings...])</h3>

<p><strong>pp.js</strong> defined <strong>Callback</strong> type that is <code>function(Error, [somethings...])</code>.</p>

<p>first argument, received Error, is accepted as <strong>nullable</strong>.</p>

<hr><h3>Iterable: (!Array | !Object as {string: any})</h3>

<p><strong>pp.js</strong> defined <strong>Iterable</strong> type that is <strong>not null</strong> Array or Object.</p>

<p>primitive values ... <code>undefined</code>, <code>null</code>, <code>string</code>, <code>boolean</code> and <code>number</code> aren't accepted.</p>

<hr><h3>Iterator: function(callback, [somethings...])</h3>

<p><strong>pp.js</strong> defined <strong>Iterator</strong> type that is <code>function(callback, [somethings...])</code> </p>

<p>For example, available iterator for Array</p>

<ul>
<li><code>function(function:next, any:value, number:index, array:iterable)</code></li>
<li><code>function(function:next, any:value, number:index)</code></li>
<li><code>function(function:next, any:value)</code></li>
<li><code>function(function:next)</code></li>
</ul><p>for Object,</p>

<ul>
<li><code>function(function:next, any:value, string:key, object:iterable)</code></li>
<li><code>function(function:next, any:value, string:key)</code></li>
<li><code>function(function:next, any:value)</code></li>
<li><code>function(function:next)</code></li>
</ul><p>iterator type need continuation function for 1st argument.</p>

<hr><h3>Predicator: function(callback, value, [key, iterable])</h3>

<p><strong>pp.js</strong> defined <strong>Predicator</strong> type that is <code>function(callback, value, [key, iterable])</code></p>

<p>Specially, predicator passing <code>boolean</code> result to callback.</p>

<h4>Example</h4>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">cpsIsEven</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">value</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">===</span> <span class="mi">0</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>

<hr><h3>Accumulator: function(callback, memo, value, [key, iterable])</h3>

<p><strong>pp.js</strong> defined <strong>Folding</strong> type that is <code>function(callback, memo, value, [key, iterable])</code>.</p>

<p>for accumulate array list.</p>

<h4>Example</h4>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">cpsAdd</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">,</span> <span class="nx">memo</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">memo</span> <span class="o">+</span> <span class="nx">value</span><span class="p">);</span>
<span class="p">};</span>
</pre></div>

<hr><p><a name="reference"></a></p>

<h1>Referrence</h1>

<p><strong>|||documentation writing now...|||</strong></p>

<h2>Control Flow</h2>

<p><a name="iterator"></a></p>

<h3>pp.iterator(procs)</h3>

<h4>Arguments</h4>

<ul>
<li>procs {Array.&lt;function(any...)&gt;} - procedure list</li>
</ul><h4>Example</h4>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">current</span> <span class="o">=</span> <span class="s1">''</span><span class="p">,</span>
  <span class="nx">iter</span> <span class="o">=</span> <span class="nx">pp</span><span class="p">.</span><span class="nx">iterator</span><span class="p">([</span>
    <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">current</span> <span class="o">=</span> <span class="s1">'1st'</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">current</span> <span class="o">=</span> <span class="s1">'2nd'</span><span class="p">;</span>
    <span class="p">},</span>
    <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">current</span> <span class="o">=</span> <span class="s1">'3rd'</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">]);</span>

<span class="nx">iter2</span> <span class="o">=</span> <span class="nx">iter</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">current</span><span class="p">);</span> <span class="c1">// '1st'</span>

<span class="nx">iter3</span> <span class="o">=</span> <span class="nx">iter2</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">current</span><span class="p">);</span> <span class="c1">// '2nd'</span>

<span class="nx">iter3</span><span class="p">()</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">current</span><span class="p">);</span> <span class="c1">// '3rd'</span>

<span class="nx">iter4</span> <span class="o">=</span> <span class="nx">iter</span><span class="p">.</span><span class="nx">next</span><span class="p">();</span>
<span class="nx">iter4</span><span class="p">();</span>
<span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">current</span><span class="p">);</span> <span class="c1">// '2nd'</span>
</pre></div>

<hr><p><a name="waterfall"></a></p>

<h3>pp.waterfall(procs, callback, [timeSlice])</h3>

<h4>Arguments</h4>

<ul>
<li>procs {Array.&lt;Iterator&gt;} - procedure list</li>
<li>callback(error, results...) - callback after iteration</li>
<li>timeSlice - <strong>optional</strong> time slice for iteration loop.</li>
</ul><h4>Example</h4>

<div class="highlight"><pre><span class="nx">pp</span><span class="p">.</span><span class="nx">waterfall</span><span class="p">([</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">,</span> <span class="nx">v</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">v</span><span class="p">,</span> <span class="nx">v</span> <span class="o">*</span> <span class="mi">2</span><span class="p">);</span> <span class="c1">// v:1</span>
  <span class="p">},</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">,</span> <span class="nx">v1</span><span class="p">,</span> <span class="nx">v2</span><span class="p">);</span>
    <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">v1</span> <span class="o">+</span> <span class="nx">v2</span><span class="p">);</span> <span class="c1">// {v1: 1, v2: 2}</span>
  <span class="p">}</span>
<span class="p">],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span> <span class="o">===</span> <span class="kc">null</span><span class="p">);</span> <span class="c1">// true</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span> <span class="c1">// 3</span>
<span class="p">});</span>
</pre></div>

<hr><p><a name="whilist"></a></p>

<h3>pp.whilist(predicator, iterator, callback, init, [timeSlice])</h3>

<hr><p><a name="until"></a></p>

<h3>pp.until(predicator, iterator, callback, init, [timeSlice])</h3>

<hr><p><a name="fill"></a></p>

<h3>pp.fill(procs, callback, [timeSlice])</h3>

<h4>Arguments</h4>

<ul>
<li>procs: Array.&lt;Iterator&gt; task procedure list</li>
<li>callback(?Error, Array) callback procedure</li>
<li>timeSlice - <strong>optional</strong> time slice for iteration loop.</li>
</ul><h4>Example</h4>

<div class="highlight"><pre><span class="nx">fireStack</span> <span class="o">=</span> <span class="p">[];</span>

<span class="nx">pp</span><span class="p">.</span><span class="nx">fill</span><span class="p">([</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">fireStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">'1st'</span><span class="p">);</span>
      <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">'1st'</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">100</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">fireStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">'2nd'</span><span class="p">);</span>
      <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">'2nd'</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">200</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">fireStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">'3rd'</span><span class="p">);</span>
      <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">'3rd'</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">50</span><span class="p">)</span>
  <span class="p">}],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// result     --- ['1st', '2nd', '3rd']</span>
    <span class="c1">// fire_stack --- ['3rd', '1st', '2nd']</span>
  <span class="p">});</span>
</pre></div>

<hr><p><a name="order"></a></p>

<h3>pp.order(procs, callback, [timeSlice])</h3>

<h4>Arguments</h4>

<ul>
<li>procs: Array.&lt;Iterator&gt; task procedure list</li>
<li>callback(?Error, Array) callback procedure</li>
<li>timeSlice - <strong>optional</strong> time slice for iteration loop.</li>
</ul><h4>Example</h4>

<div class="highlight"><pre><span class="nx">fireStack</span> <span class="o">=</span> <span class="p">[];</span>

<span class="nx">pp</span><span class="p">.</span><span class="nx">order</span><span class="p">([</span>
  <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">fireStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">'1st'</span><span class="p">);</span>
      <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">'1st'</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">100</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">fireStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">'2nd'</span><span class="p">);</span>
      <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">'2nd'</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">200</span><span class="p">);</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">fireStack</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">'3rd'</span><span class="p">);</span>
      <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="s1">'3rd'</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">50</span><span class="p">)</span>
  <span class="p">}],</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// result     --- ['1st', '2nd', '3rd']</span>
    <span class="c1">// fire_stack --- ['1st', '2nd', '3rd']</span>
  <span class="p">});</span>
</pre></div>

<hr><h2>Collection API</h2>

<p><a name="each"></a></p>

<h3>pp.each(iterator, callback, iterable, [timeSlice])</h3>

<h4>Arguments</h4>

<ul>
<li>iterator(callback, [value, key, iterable]) - iteration procedure</li>
<li>callback(error, [somethings...]) - callback for after iteration</li>
<li>iterable - <strong>not Nullable</strong> Array or Object as HashMap (<code>{{string: *}}</code>)</li>
<li>timeSlice - <strong>optional</strong> time slice for iteration loop.</li>
</ul><h4>Example</h4>

<div class="highlight"><pre><span class="nx">pp</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">index</span><span class="p">,</span> <span class="nx">itrable</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">errorCondition</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// when it should throw Error, instead of call</span>
      <span class="nx">next</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">haltCondition</span><span class="p">)</span> <span class="p">{</span>
      <span class="c1">// when it should halt iteration (purpose has been achieved)</span>
      <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">result</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span> <span class="c1">// call iteration callback simply</span>
      <span class="nx">next</span><span class="p">();</span>
    <span class="p">}</span>
  <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// do something when finish (or halt) iteration</span>
  <span class="p">},</span> <span class="p">[</span><span class="s1">'a.coffee'</span><span class="p">,</span> <span class="s1">'b.coffee'</span><span class="p">,</span> <span class="s1">'c.coffee'</span><span class="p">]);</span>
</pre></div>

<p><a name="eachOrder"></a></p>

<h3>pp.eachOrder(iterator, callback, iterable, [timeSlice])</h3>

<p><code>pp.eachOrder</code> is another version of <code>pp.each</code> that keep invocation callback order.</p>

<hr><p><a name="map"></a></p>

<h3>pp.map(iterator, callback, iterable, [timeSlice])</h3>

<h4>Arguments</h4>

<ul>
<li>iterator(callback, [value, index, iterable]) - iteration procedure</li>
<li>callback(error, [somethings...]) - callback for after iteration</li>
<li>iterable - <strong>not Nullable</strong> Array or Object as HashMap (<code>{{string: *}}</code>)</li>
<li>timeSlice - <strong>optional</strong> time slice for iteration loop.</li>
</ul><h4>Example</h4>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">cpsSqMap</span> <span class="o">=</span> <span class="nx">pp</span><span class="p">.</span><span class="nx">map</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">!==</span> <span class="s1">'number'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">next</span><span class="p">(</span><span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s1">'cpsSqMap require number array. but include'</span> <span class="o">+</span>
      <span class="k">typeof</span> <span class="nx">value</span> <span class="o">+</span> <span class="s1">' ('</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">+</span> <span class="s1">') at ['</span> <span class="o">+</span> <span class="nx">index</span> <span class="o">+</span> <span class="s1">']'</span><span class="p">));</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">value</span> <span class="o">*</span> <span class="nx">value</span><span class="p">);</span>
  <span class="p">});</span>

<span class="nx">cpsSqMap</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>
<span class="c1">//=&gt; null [1, 4, 9, 16, 25]</span>

<span class="nx">cpsSqMap</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s1">'3'</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>
<span class="c1">//=&gt; [TypeError: cpsSqMap require number array. but include string (3) at [2]] [ 1, 4 ]</span>
</pre></div>

<p><a name="mapOrder"></a></p>

<h3>pp.mapOrder(iterator, callback, iterable, [timeSlice])</h3>

<p><code>pp.mapOrder</code> is another version of <code>pp.each</code> that keep invocation callback order.</p>

<hr><p><a name="filter"></a></p>

<h3>pp.filter(predicator, callback, iterable, [timeSlice])</h3>

<p><code>pp.filter</code>'s invocation is <em>order</em></p>

<h4>Arguments</h4>

<ul>
<li>predicator(callback, [value, index, iterable]) - iteration procedure</li>
<li>callback(error, [somethings...]) - callback for after iteration</li>
<li>iterable - <strong>not Nullable</strong> Array or Object as HashMap (<code>{{string: *}}</code>)</li>
<li>timeSlice - <strong>optional</strong> time slice for iteration loop.</li>
</ul><h4>Example</h4>

<div class="highlight"><pre><span class="kd">var</span> <span class="nx">cpsOdd</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">value</span> <span class="o">!==</span> <span class="s1">'number'</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">next</span><span class="p">(</span><span class="k">new</span> <span class="nx">TypeError</span><span class="p">(</span><span class="s1">'cpsOdd require number array. but include'</span> <span class="o">+</span>
      <span class="k">typeof</span> <span class="nx">value</span> <span class="o">+</span> <span class="s1">' ('</span> <span class="o">+</span> <span class="nx">value</span> <span class="o">+</span> <span class="s1">') at ['</span> <span class="o">+</span> <span class="nx">index</span> <span class="o">+</span> <span class="s1">']'</span><span class="p">));</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">value</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">===</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// apply 2nd arg as boolean</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">printCallback</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">results</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span> <span class="o">?</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span> <span class="o">:</span> <span class="nx">results</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">pp</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">cpsOdd</span><span class="p">,</span> <span class="nx">printCallback</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>
<span class="c1">//=&gt; [1, 3, 5]</span>
<span class="nx">pp</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">cpsOdd</span><span class="p">,</span> <span class="nx">printCallback</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">]);</span>
<span class="c1">//=&gt; []</span>

<span class="kd">var</span> <span class="nx">cpsPrivate</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">key</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^_/i</span><span class="p">));</span>
<span class="p">};</span>

<span class="c1">// filtering to hashmap</span>
<span class="nx">pp</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="nx">cpsPrivate</span><span class="p">,</span> <span class="nx">printCallback</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">'John'</span><span class="p">,</span>
  <span class="nx">age</span><span class="o">:</span> <span class="mi">26</span><span class="p">,</span>
  <span class="nx">gender</span><span class="o">:</span> <span class="nx">MALE</span><span class="p">,</span>
  <span class="nx">_hasGirlFriend</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">});</span> <span class="c1">//=&gt; "{_hasGirlFriend: true}" (o_O)</span>
</pre></div>

<hr><p><a name="reject"></a></p>

<h3>pp.reject(predicator, callback, iterable, [timeSlice])</h3>

<p>complement of <code>pp.filter</code></p>

<h4>Arguments</h4>

<ul>
<li>predicator(callback, [value, index, iterable]) - iteration procedure</li>
<li>callback(error, [somethings...]) - callback for after iteration</li>
<li>iterable - <strong>not Nullable</strong> Array or Object as HashMap (<code>{{string: *}}</code>)</li>
<li>timeSlice - <strong>optional</strong> time slice for iteration loop.</li>
</ul><h4>Example</h4>

<div class="highlight"><pre><span class="nx">pp</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">cpsOdd</span><span class="p">,</span> <span class="nx">printCallback</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>
<span class="c1">//=&gt; [2, 4]</span>
<span class="nx">pp</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">cpsOdd</span><span class="p">,</span> <span class="nx">printCallback</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">18</span><span class="p">]);</span>
<span class="c1">//=&gt; [10, 12, 14, 16, 18]</span>

<span class="c1">// filtering to hashmap</span>
<span class="nx">pp</span><span class="p">.</span><span class="nx">reject</span><span class="p">(</span><span class="nx">cpsPrivate</span><span class="p">,</span> <span class="nx">printCallback</span><span class="p">,</span> <span class="p">{</span>
  <span class="nx">name</span><span class="o">:</span> <span class="s1">'John'</span><span class="p">,</span>
  <span class="nx">age</span><span class="o">:</span> <span class="mi">26</span><span class="p">,</span>
  <span class="nx">gender</span><span class="o">:</span> <span class="nx">MALE</span><span class="p">,</span>
  <span class="nx">_hasGirlFriend</span><span class="o">:</span> <span class="kc">true</span>
<span class="p">});</span> <span class="c1">//=&gt; "{name: 'John', age: 26, gender: "male"}" (-_-)</span>
</pre></div>

<hr><p><a name="find"></a></p>

<h3>pp.find(predicator, callback, iterable, [timeSlice])</h3>

<p>lookup match value from iterable.</p>

<h4>Arguments</h4>

<ul>
<li>predicator(callback, [value, key, iterable]) - iteration procedure</li>
<li>callback(error, [value, key]) - callback for after iteration</li>
<li>iterable - <strong>not Nullable</strong> Array or Object as HashMap (<code>{{string: *}}</code>)</li>
<li>timeSlice - <strong>optional</strong> time slice for iteration loop.</li>
</ul><h4>Example</h4>

<div class="highlight"><pre><span class="nx">pp</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">cpsOdd</span><span class="p">,</span> <span class="nx">printCallback</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>
<span class="c1">//=&gt; 1</span>
<span class="nx">pp</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="nx">cpsOdd</span><span class="p">,</span> <span class="nx">printCallback</span><span class="p">,</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">18</span><span class="p">]);</span>
<span class="c1">//=&gt; undefined</span>

<span class="nx">pp</span><span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">key</span><span class="p">.</span><span class="nx">match</span><span class="p">(</span><span class="sr">/^#[a-zA-Z0-9]/i</span><span class="p">))</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'value:'</span><span class="p">,</span> <span class="nx">value</span><span class="p">,</span> <span class="s1">'key:'</span><span class="p">,</span> <span class="nx">key</span><span class="p">);</span>
<span class="p">},</span> <span class="p">{</span> <span class="c1">// js Object as CSS</span>
  <span class="nx">body</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">width</span><span class="o">:</span> <span class="s1">'100%'</span>
  <span class="p">},</span>
  <span class="s1">'#container'</span><span class="o">:</span> <span class="p">{</span>
    <span class="s1">'background-color'</span><span class="o">:</span> <span class="s1">'#eee'</span>
  <span class="p">},</span>
  <span class="s1">'.notice'</span><span class="o">:</span> <span class="p">{</span>
    <span class="nx">color</span><span class="o">:</span> <span class="s1">'#000'</span>
  <span class="p">}</span>
<span class="p">});</span> <span class="c1">//=&gt;value: {'background-color': '#eee'} key: '#container'</span>
</pre></div>

<hr><p><a name="any"></a></p>

<h3>pp.any(predicator, callback, iterable, [timeSlice])</h3>

<p><code>pp.any</code> is CPS <code>Array.some</code></p>

<h4>Arguments</h4>

<ul>
<li>predicator(callback, [value, index, iterable]) - iteration procedure</li>
<li>callback(error, bool, [key]) - callback for after iteration</li>
<li>iterable - <strong>not Nullable</strong> Array or Object as HashMap (<code>{{string: *}}</code>)</li>
<li>timeSlice - <strong>optional</strong> time slice for iteration loop.</li>
</ul><h4>Example</h4>

<div class="highlight"><pre><span class="nx">pp</span><span class="p">.</span><span class="nx">any</span><span class="p">(</span><span class="nx">cpsOdd</span><span class="p">,</span> <span class="nx">printCallback</span><span class="p">,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
<span class="c1">//=&gt; true</span>
<span class="nx">pp</span><span class="p">.</span><span class="nx">any</span><span class="p">(</span><span class="nx">cpsOdd</span><span class="p">,</span> <span class="nx">printCallback</span><span class="p">,</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
<span class="c1">//=&gt; false</span>
</pre></div>

<hr><p><a name="all"></a></p>

<h3>pp.all(predicator, callback, iterable, [timeSlice])</h3>

<p><code>pp.all</code> is CPS <code>Array.every</code></p>

<h4>Arguments</h4>

<ul>
<li>predicator(callback, [value, index, iterable]) - iteration procedure</li>
<li>callback(error, bool, [key]) - callback for after iteration</li>
<li>iterable - <strong>not Nullable</strong> Array or Object as HashMap (<code>{{string: *}}</code>)</li>
<li>timeSlice - <strong>optional</strong> time slice for iteration loop.</li>
</ul><h4>Example</h4>

<div class="highlight"><pre><span class="nx">pp</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">cpsOdd</span><span class="p">,</span> <span class="nx">printCallback</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
<span class="c1">//=&gt; false</span>
<span class="nx">pp</span><span class="p">.</span><span class="nx">all</span><span class="p">(</span><span class="nx">cpsOdd</span><span class="p">,</span> <span class="nx">printCallback</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">])</span>
<span class="c1">//=&gt; true</span>
</pre></div>

<hr><p><a name="foldl"></a></p>

<h3>pp.foldl(accumulator, callback, init, array, [timeSlice])</h3>

<p>folding accumulation left(first of array) to right(last of array).</p>

<p><code>pp.foldl</code>'s invocation is <em>order</em></p>

<h4>Arguments</h4>

<ul>
<li>accumulator(callback, memo, value, [index, iterable]) - iteration procedure</li>
<li>callback(error, [somethings...]) - callback for after iteration</li>
<li>init - init value for accumulation</li>
<li>array - <strong>not Nullable</strong> Array</li>
<li>timeSlice - <strong>optional</strong> time slice for iteration loop.</li>
</ul><h4>Example</h4>

<div class="highlight"><pre><span class="nx">pp</span><span class="p">.</span><span class="nx">foldl</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">r</span> <span class="o">+</span> <span class="nx">x</span><span class="p">);</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>  <span class="c1">// =&gt; 15</span>
<span class="p">},</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span> <span class="c1">// 0 + 1 + 2 + 3 + 4 + 5 =&gt; 15</span>
</pre></div>

<hr><p><a name="foldl1"></a></p>

<h3>pp.foldl1(accumulator, callback, array, [timeSlice])</h3>

<p><code>pp.foldl1</code> require Array has 1 or more length. use first element from Array as <code>init</code> value.</p>

<h4>Arguments</h4>

<ul>
<li>accumulator(callback, memo, value, [index, iterable]) - iteration procedure</li>
<li>callback(error, [somethings...]) - callback for after iteration</li>
<li>array - <strong>not Nullable</strong> Array</li>
<li>timeSlice - <strong>optional</strong> time slice for iteration loop.</li>
</ul><h4>Example</h4>

<div class="highlight"><pre><span class="nx">pp</span><span class="p">.</span><span class="nx">foldl1</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">r</span> <span class="o">+</span> <span class="nx">x</span><span class="p">);</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span> <span class="c1">// =&gt; 15</span>
<span class="p">},</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>   <span class="c1">// 1 + 2 + 3 + 4 + 5 =&gt; 15</span>

<span class="nx">pp</span><span class="p">.</span><span class="nx">foldl1</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">r</span> <span class="o">+</span> <span class="nx">x</span><span class="p">);</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span> <span class="c1">// =&gt; TypeError</span>
<span class="p">},</span> <span class="p">[]);</span> <span class="c1">// empty array :^(</span>
</pre></div>

<hr><p><a name="foldr"></a></p>

<h3>pp.foldr(accumulator, callback, init, array, [timeSlice])</h3>

<p>folding accumulation right(last of array) to left(first of array).</p>

<p><code>pp.foldl</code>'s invocation is <em>order</em></p>

<h4>Arguments</h4>

<ul>
<li>accumulator(callback, memo, value, [index, iterable]) - iteration procedure</li>
<li>callback(error, [somethings...]) - callback for after iteration</li>
<li>init - init value for accumulation</li>
<li>array - <strong>not Nullable</strong> Array</li>
<li>timeSlice - <strong>optional</strong> time slice for iteration loop.</li>
</ul><h4>Example</h4>

<div class="highlight"><pre><span class="nx">pp</span><span class="p">.</span><span class="nx">foldr</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">r</span> <span class="o">+</span> <span class="nx">x</span><span class="p">);</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span>  <span class="c1">// =&gt; 15</span>
<span class="p">},</span> <span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span> <span class="c1">// 0 + 5 + 4 + 3 + 2 + 1 =&gt; 15</span>
</pre></div>

<hr><p><a name="foldr1"></a></p>

<h3>pp.foldr1(accumulator, callback, array, [timeSlice])</h3>

<p><code>pp.foldr1</code> require Array has 1 or more length. use last element from Array as <code>init</code> value.</p>

<h4>Arguments</h4>

<ul>
<li>accumulator(callback, memo, value, [index, iterable]) - iteration procedure</li>
<li>callback(error, [somethings...]) - callback for after iteration</li>
<li>array - <strong>not Nullable</strong> Array</li>
<li>timeSlice - <strong>optional</strong> time slice for iteration loop.</li>
</ul><h4>Example</h4>

<div class="highlight"><pre><span class="nx">pp</span><span class="p">.</span><span class="nx">foldr1</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">next</span><span class="p">,</span> <span class="nx">r</span><span class="p">,</span> <span class="nx">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">next</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="nx">r</span> <span class="o">+</span> <span class="nx">x</span><span class="p">);</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">result</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">result</span><span class="p">);</span> <span class="c1">// =&gt; 15</span>
<span class="p">},</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">]);</span>   <span class="c1">// 5 + 4 + 3 + 2 + 1 =&gt; 15</span>
</pre></div>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/VoQn">VoQn</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-33864951-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>